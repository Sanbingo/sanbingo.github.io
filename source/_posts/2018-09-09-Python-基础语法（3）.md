---
title: Python 基础语法（3）
date: 2018-09-09 21:22:26
categories:
- python
tags:
---

*** 11、函数 ***

（1）数据类型转换（常用）
  ```
  int('123') => 123
  int(12.34) => 12
  float('12.34') => 12.34
  str(123) => '123'
  bool(1) => true
  bool('') => False
  ```
（2）函数定义

  ```
  def 函数名（参数1， 参数2，...):
      if not isinstance(参数1, (int, float)):
          raise TypeError('type error info...')
      else:
          return xx
  ```
  如果没有return语句，函数执行完返回None

（3）返回多值
  函数可以返回多值，例如返回一个tuple
  ```
  x, y = (1, 2) => x = 1, y = 2
  ```
<!--more-->
（4）参数形式

  a、位置参数 (x, y)
  b、默认参数 (x, y, z=0)
  c、可变参数，长度不定 \*args => tuple
  d、关键字参数 \*\*kw => dict
  e、命名关键字参数 (x, y, city='beijing')

（5）try...except 语句

  ```
    try:
        // do sth()
    except TypeError:
        // do sth()
  ```

（6）递归函数和尾递归优化

*** 12、高级特性 ***

（1）切片（类slice功能）

list、tuple、str都可以切片
```
  L = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
  L[0:5] <=> L[:5] => [0, 1, 2, 3, 4]
  L[-2:-1] => [8]
  L[-2:] => [8, 9]
  L[::2] => [0, 2, 4, 6, 8]
  L[:] => 复制整个list
```
（2）迭代（for...in)

list、tuple、str都可以迭代
判断是否可以迭代的方法：
```
from Collections import Iterable

isinstance([1, 2, 3], Iterable) => True
isinstance('abc', Iterable) => True
isinstance(123, Iterable) => False
```

dict 迭代
```
  d = {name: 'san', age: 18}

  for key in d:
      print(key)
  // => name, age

  for value in d.values():
      print(value)
  // => 'san', 18

  for key, value in d.items():
      print(key, value)
  // => name 'san'
  // => age 18
```

多变量（析构）
```
for x, y in [(1, 1), (2, 2), (3, 3)]
  print(x, y)
  // => 1 1
  // => 2 2
  // => 3 3
```

list索引

`Enumerate()`可以把list转变为索引-元素对
```
for index, val in Enumerate([a, b, c]):
    print(index, val)
// => 0 a
// => 1 b
// => 2 c
```
（3） 列表生成式
```
[x*x for x in range(1, 5)]
=> [1, 4, 9, 16]

[x*x for x in range(1, 5) if x%2 == 0]
=> [4, 16]
```

（4）生成器
如果有大量初始元素，用列表生成式会占用大量内存，Python内置边循环边计算，不必完整计算这种方式叫做“生成器”

a、定义：列表生成式[]换成() 或者函数中包含yield关键字
```
l = [x*x for x in range(5)]
g = (x*x for x in range(5))
```

b、遍历：使用`for...in` 遍历，或者`next()`函数单个遍历
```
g = (x*x for x in range(5))
next(g) => 1
next(g) => 4
...
// 最后抛StopIteration异常
for x in g:
  print(x) => 1 4 9 16
// 不会抛异常
```
c、函数和generator函数的区别
函数调用func()顺序执行，遇到return返回或运行到最后

g函数调用g()并不会执行输出，而是生成g函数对象

通过next(g)函数调用执行，遇到yield语句返回，返回yield后面的值。再次执行next(g)时从上次yield语句处继续往后执行。

g()函数对象一般不会用next()调用，而且采用for...in迭代输出。

（5）迭代器

a、名词汇总
`Iterable`：可迭代对象：[]/{}/str/()/g
`Generator`：生成器，带yield的函数
`Iterator`：迭代器，可以使用next调用的对象
```
isinstance([], Iterable) => False
isinstance((x for x in range(5)), Iterator) => True
```
b、`iter()`函数把Iterable转变为Iterator
```
isinstance(iter([]), Iterator) => True
isinstance(iter('123'), Iterator) => True
```
c、Iterable VS Iterator
可作用于for循环的对象：Iterable对象
可作用于next函数的对象：Iterator对象。
