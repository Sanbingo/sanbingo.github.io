---
title: Python 基础语法（4）
date: 2018-09-09 22:18:19
categories:
- python
tags:
---

*** 13、高阶函数 ***
  `map`
  `reduce`
  `filter`
  `sorted`

*** 14、返回函数 ***
（1）函数可作为返回值返回

（2）闭包：函数返回函数产生闭包

（3）经典的变量循环问题

```
  def gen():
    fs=[]
    for x in range(4):
      def f():
        print(x)
      fs.append(f)
    return fs
  f1, f2, f3 = gen()

  => f1 =3
  => f2 =3
  => f3 =3
  // 为什么呢？因为f1, f2, f3都是对x的引用，执行为for循环，x的值为3， 为了达到原来的目的，需要如下改造：

  def gen():
    fs=[]
    for x in range(4):
      def t(j):
        def f():
          print(j)
        return f
      fs.append(t(x))
    return fs
```

*** 15、匿名函数（lambda) ***
```
  def foo(x):
    return x * x
  <=>
  lambda x: x*x

  map(foo, [1, 2, 3]) <=> map(lambda x: x*x, [1, 2, 3])
```

*** 16、装饰器 decorator ***

在不改变原函数功能的前提下，动态增加功能的高阶函数

*** 17、偏函数 partial ***

把某个函数的某些参数固定，产生一个新的函数
```
  def int2(x, base=2):
    return int(x, base)
  <=>
  import functools
  int2 = functools.partial(int(x, base=2))
```

*** 18、类 ***

（1）类是创建实例的模板，而实例是一个具体的对象。
```
  class Student(Object):

    def __init__(self, name):
      self.name = name

    def print(self):
      print(self.name)

```
（2）类的方法与普通函数的区别
类的方法的第一个参数永远是`self`，代表类的实例，调用类的方法时不需要传这个参数。
```
s = Student('san')
s.print() => 'san'
```
（3）类的私有属性
用两个下划线开头的属性表示不能用实例访问
```
class Student(Object):
  def __init__(self, name):
    self.__name = name

s = Student('san')
s.__name => Error
```
私有属性通过类内部定义两个公有方法暴露给外面使用：
```
class Student(Object):
  def __init__(self, name):
    self.__name = name

  def get_name(self):
    return self.__name

  def set_name(self, name):
    self.__name = name

s = Student()
s.set_name('san')
s.get_name() => 'san'
```

*** 19、继承和多态 ***

（1）继承：子类可以直接使用父类定义的方法，也可以重写方法覆盖父类的方法。
子类的实例，同样也是父类的实例
```
isinstance(subobj, SubCls) => True
isinstance(subobj, BaseCls) => True
```

（2）多态，鸭子类型
定义一个方法调用父类obj的一个方法run()
```
def test(obj):
    obj.run()
```
那么所有基于父类的子类实例都可以使用test函数
```
class SubCls(BaseCls):
  pass

subobj = SubCls()
test(subobj) => 调用成功
```

*** 20、类型判断 ***

（1） `type()`方法和types类型名
```
type(123) => <Class 'int'>
type(函数) => types.FunctionType
```

（2）`isinstance()`

（3）`dir()`函数获取一个对象所有的属性和方法，返回字符串list

（4）对象常用的函数
```
  a.getAttr(obj, 'name', 'default Name')
  b.setAttr(obj, 'name', 'san') => 属性不存在时会报错，需要先用hasAttr函数判断是否存在
  c.hasAttr(obj, 'name') => 存在返回True，否则返回False
```
